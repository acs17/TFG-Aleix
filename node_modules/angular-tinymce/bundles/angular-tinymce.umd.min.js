!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("rxjs/Observable"),require("rxjs/add/operator/debounceTime"),require("rxjs/add/operator/skipWhile"),require("rxjs/add/operator/take"),require("rxjs/add/observable/interval"),require("rxjs/add/observable/fromEvent"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/forms","rxjs/Observable","rxjs/add/operator/debounceTime","rxjs/add/operator/skipWhile","rxjs/add/operator/take","rxjs/add/observable/interval","rxjs/add/observable/fromEvent","@angular/common"],t):t(e["angular-tinymce"]={},e.ng.core,e.ng.forms,e.Rx,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable,e.Rx.Observable,e.ng.common)}(this,function(e,t,n,o,i,r,s,u,c,p){"use strict";var a=function(){};a.Click="click",a.DblClick="dblClick",a.MouseDown="MouseDown",a.MouseUp="MouseUp",a.MouseMove="MouseMove",a.MouseOver="MouseOver",a.MouseOut="MouseOut",a.MouseEnter="MouseEnter",a.MouseLeave="MouseLeave",a.KeyDown="KeyDown",a.KeyPress="KeyPress",a.KeyUp="KeyUp",a.ContextMenu="ContextMenu",a.Paste="Paste",a.Init="Init",a.Focus="Focus",a.Blur="Blur",a.BeforeSetContent="BeforeSetContent",a.SetContent="SetContent",a.GetContent="GetContent",a.PreProcess="PreProcess",a.PostProcess="PostProcess",a.NodeChange="NodeChange",a.Undo="Undo",a.Redo="Redo",a.Change="Change",a.Dirty="Dirty",a.Remove="Remove",a.ExecCommand="ExecCommand",a.PastePreProcess="PastePreProcess",a.PastePostProcess="PastePostProcess",a.AddEditor="AddEditor",a.RemoveEditor="RemoveEditor";var m=new t.InjectionToken("angular-tinymce-settings"),d=function(){function e(e,n){var o=this;if(this._input_settings=e,this.ngZone=n,this.click=new t.EventEmitter,this.dblclick=new t.EventEmitter,this.mousedown=new t.EventEmitter,this.mouseup=new t.EventEmitter,this.mousemove=new t.EventEmitter,this.mouseover=new t.EventEmitter,this.mouseout=new t.EventEmitter,this.mouseenter=new t.EventEmitter,this.mouseleave=new t.EventEmitter,this.keydown=new t.EventEmitter,this.keypress=new t.EventEmitter,this.keyup=new t.EventEmitter,this.contextmenu=new t.EventEmitter,this.paste=new t.EventEmitter,this.init=new t.EventEmitter,this.focus=new t.EventEmitter,this.blur=new t.EventEmitter,this.beforesetcontent=new t.EventEmitter,this.setcontent=new t.EventEmitter,this.getcontent=new t.EventEmitter,this.preprocess=new t.EventEmitter,this.postprocess=new t.EventEmitter,this.nodechange=new t.EventEmitter,this.undo=new t.EventEmitter,this.redo=new t.EventEmitter,this.change=new t.EventEmitter,this.dirty=new t.EventEmitter,this.remove=new t.EventEmitter,this.execcommand=new t.EventEmitter,this.pastepreprocess=new t.EventEmitter,this.pastepostprocess=new t.EventEmitter,this.onModelChange=function(){},this.onModelTouched=function(){},this._setSettings(this.settings),!window.tinymce&&!document.getElementById("tinymceScript")){var i=document.createElement("script");i.id="tinymceScript",i.setAttribute("src",this.settings.tinymceScriptURL||"assets/tinymce/tinymce.min.js"),i.onload=function(){tinymce.baseURL=o.settings.baseURL},document.body.appendChild(i)}}return Object.defineProperty(e.prototype,"settings",{get:function(){return this._settings},set:function(e){e&&(this._settings=e)},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){var t=null!=e?e.toString():"";this.editor?(this.fromWriteValue=!0,this.editor.setContent(t)):this.beforeInitValue=t},e.prototype.registerOnChange=function(e){this.onModelChange=e},e.prototype.registerOnTouched=function(e){this.onModelTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e,this.setEditorMode(e)},e.prototype.setEditorMode=function(e){this.editor&&(e?this.editor.setMode("readonly"):this.editor.setMode("design"))},e.prototype._setSettings=function(e){var t=e||this._input_settings||{};this.settings=Object.assign({},t),window.tinymce&&(tinymce.baseURL=this.settings.baseURL)},e.prototype.ngOnChanges=function(e){var t=!1;null!==e&&(e.settings&&e.settings.currentValue&&(this._setSettings(e.settings.currentValue),t=!0),e.isDisabled&&this.setDisabledState(e.isDisabled.currentValue),t&&this.reInitEditor())},e.prototype.ngAfterViewInit=function(){this.initEditor()},e.prototype.initEditor=function(){var e=this;this.settings.target=this.elem.nativeElement,this.initCallbacks(this.settings),o.Observable.interval(300).skipWhile(function(){return!window.tinymce}).take(1).subscribe(function(){tinymce.init(e.settings)})},e.prototype.reInitEditor=function(){var e=this;this.editor&&this.ngZone.run(function(){e.triggerChange(!0)}),this.removeEditor(),this.initEditor()},e.prototype.initCallbacks=function(e){var t=this,n=e.setup;e.setup=function(e){e.on(a.Init,function(e){return t.init.emit(e)}),n&&n(e)};var o=e.init_instance_callback;e.init_instance_callback=function(e){t.editor=e,t.setEditorMode(t.disabled),null!=t.beforeInitValue&&t.editor.setContent(t.beforeInitValue),o&&o(e),e.on(a.Click,function(e){return t.click.emit(e)}),e.on(a.DblClick,function(e){return t.dblclick.emit(e)}),e.on(a.MouseDown,function(e){return t.mousedown.emit(e)}),e.on(a.MouseUp,function(e){return t.mouseup.emit(e)}),e.on(a.MouseMove,function(e){return t.mousemove.emit(e)}),e.on(a.MouseOver,function(e){return t.mouseover.emit(e)}),e.on(a.MouseOut,function(e){return t.mouseout.emit(e)}),e.on(a.MouseEnter,function(e){return t.mouseenter.emit(e)}),e.on(a.MouseLeave,function(e){return t.mouseleave.emit(e)}),e.on(a.KeyDown,function(e){return t.keydown.emit(e)}),e.on(a.KeyPress,function(e){return t.keypress.emit(e)}),e.on(a.KeyUp,function(e){t.ngZone.run(function(){t.triggerChange()}),t.keyup.emit(e)}),e.on(a.ContextMenu,function(e){return t.contextmenu.emit(e)}),e.on(a.Paste,function(e){return t.paste.emit(e)}),e.on(a.Focus,function(e){return t.focus.emit(e)}),e.on(a.Blur,function(e){return t.blur.emit(e)}),e.on(a.BeforeSetContent,function(e){return t.beforesetcontent.emit(e)}),e.on(a.SetContent,function(e){t.ngZone.run(function(){t.triggerChange()}),t.setcontent.emit(e)}),e.on(a.GetContent,function(e){return t.getcontent.emit(e)}),e.on(a.PreProcess,function(e){return t.preprocess.emit(e)}),e.on(a.PostProcess,function(e){return t.postprocess.emit(e)}),e.on(a.NodeChange,function(e){return t.nodechange.emit(e)}),e.on(a.Undo,function(e){return t.undo.emit(e)}),e.on(a.Redo,function(e){return t.redo.emit(e)}),e.on(a.Change,function(e){t.ngZone.run(function(){t.triggerChange()}),t.change.emit(e)}),e.on(a.Dirty,function(e){return t.dirty.emit(e)}),e.on(a.Remove,function(e){return t.remove.emit(e)}),e.on(a.ExecCommand,function(e){t.ngZone.run(function(){t.triggerChange()}),t.execcommand.emit(e)}),e.on(a.PastePreProcess,function(e){return t.pastepreprocess.emit(e)}),e.on(a.PastePostProcess,function(e){return t.pastepostprocess.emit(e)})}},e.prototype.triggerChange=function(e){if(void 0===e&&(e=!1),this.fromWriteValue)this.fromWriteValue=!1;else{var t=this.editor.getContent();t||(t=""),e&&(this.beforeInitValue=t),this.onModelChange(t),this.onModelTouched()}},e.prototype.removeEditor=function(){this.editor&&tinymce.remove(this.editor)},e.prototype.ngOnDestroy=function(){this.removeEditor()},e}();d.decorators=[{type:t.Component,args:[{selector:"angular-tinymce",template:"<textarea #tinymce ></textarea>",providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return d}),multi:!0}]}]}],d.ctorParameters=function(){return[{type:undefined,decorators:[{type:t.Inject,args:[m]}]},{type:t.NgZone}]},d.propDecorators={isDisabled:[{type:t.Input}],settings:[{type:t.Input}],selector:[{type:t.Input}],click:[{type:t.Output}],dblclick:[{type:t.Output}],mousedown:[{type:t.Output}],mouseup:[{type:t.Output}],mousemove:[{type:t.Output}],mouseover:[{type:t.Output}],mouseout:[{type:t.Output}],mouseenter:[{type:t.Output}],mouseleave:[{type:t.Output}],keydown:[{type:t.Output}],keypress:[{type:t.Output}],keyup:[{type:t.Output}],contextmenu:[{type:t.Output}],paste:[{type:t.Output}],init:[{type:t.Output}],focus:[{type:t.Output}],blur:[{type:t.Output}],beforesetcontent:[{type:t.Output}],setcontent:[{type:t.Output}],getcontent:[{type:t.Output}],preprocess:[{type:t.Output}],postprocess:[{type:t.Output}],nodechange:[{type:t.Output}],undo:[{type:t.Output}],redo:[{type:t.Output}],change:[{type:t.Output}],dirty:[{type:t.Output}],remove:[{type:t.Output}],execcommand:[{type:t.Output}],pastepreprocess:[{type:t.Output}],pastepostprocess:[{type:t.Output}],elem:[{type:t.ViewChild,args:["tinymce"]}]};var l=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:m,useValue:t}]}},e}();l.decorators=[{type:t.NgModule,args:[{imports:[p.CommonModule],declarations:[d],exports:[d]}]}],l.ctorParameters=function(){return[]},e.TinyMceComponent=d,e.TINYMCE_SETTINGS_TOKEN=m,e.tinymceDefaultSettings=function(){return{baseURL:"/assets/tinymce",tinymceScriptURL:"/assets/tinymce/tinymce.min.js",theme_url:"/assets/tinymce/themes/modern/theme.min.js",skin_url:"/assets/tinymce/skins/lightgray"}},e.TinyMceEvents=a,e.TinyMceModule=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=angular-tinymce.umd.min.js.map
